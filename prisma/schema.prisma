generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:root@localhost:5432/AutoX"
}

model action {
  id               String           @id(map: "PK_2d9db9cf5edfbbae74eb56e3a39") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  zapId            String           @db.Uuid
  actionId         String           @db.VarChar
  sortingOrder     Int
  metadata         Json             @default("{}") @db.Json
  available_action available_action @relation(fields: [actionId], references: [id], map: "FK_34f3deb41f78c162c102ec797db")
  zap              zap              @relation(fields: [zapId], references: [id], map: "FK_b52dee2258535a22608afa26016")
}

model available_action {
  id     String   @id(map: "PK_4f29bf8ba8cd3dea72f2b02ec8e") @db.VarChar
  name   String   @db.VarChar
  image  String   @db.VarChar(2048)
  action action[]
}

model available_trigger {
  id      String    @id(map: "PK_5cf0e5ca92a93b4af25044b4379") @db.VarChar
  name    String    @db.VarChar
  image   String    @db.VarChar(2048)
  trigger trigger[]
}

model trigger {
  id                String            @id(map: "PK_fc6b3cbbe199d89c002831e03e8") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  triggerId         String            @db.VarChar
  zapId             String            @unique(map: "UQ_b1c85f88335ea94a06f35c41993") @db.Uuid
  metadata          Json              @default("{}") @db.Json
  zap               zap               @relation(fields: [zapId], references: [id], map: "FK_b1c85f88335ea94a06f35c41993")
  available_trigger available_trigger @relation(fields: [triggerId], references: [id], map: "FK_ef37450ce4b3f32e2d0ca445f93")
}

model user {
  id       Int    @id(map: "PK_cace4a159ff9f2512dd42373760") @default(autoincrement())
  name     String @db.VarChar
  email    String @db.VarChar
  password String @db.VarChar
  zap      zap[]
}

model zap {
  id        String    @id(map: "PK_c84ea935b796059a4453a9a7974") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  userId    Int
  triggerId String?   @db.VarChar
  action    action[]
  trigger   trigger?
  user      user      @relation(fields: [userId], references: [id], map: "FK_ae0dc0d21e054d13384e3cbf34c")
  zap_run   zap_run[]
}

model zap_run {
  id             String          @id(map: "PK_de3b149b247fdfb679be94bd870") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  zapId          String          @db.Uuid
  metadata       Json            @default("{}") @db.Json
  zap            zap             @relation(fields: [zapId], references: [id], map: "FK_f87c27cf963e2f802408e8ac94d")
  zap_run_outbox zap_run_outbox?
}

model zap_run_outbox {
  id       String  @id(map: "PK_5631a2c79eb896f8407b13256f1") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  zapRunId String  @unique(map: "UQ_3fdc23b97787977fc39f6fdc924") @db.Uuid
  zap_run  zap_run @relation(fields: [zapRunId], references: [id], map: "FK_3fdc23b97787977fc39f6fdc924")
}
